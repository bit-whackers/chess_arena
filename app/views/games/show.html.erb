<h1><%= @game.title %></h1>
<%= link_to 'Edit', edit_game_path(@game), class: 'btn btn-primary' %>
<%= link_to 'Delete', game_path(@game), method: :delete, data: {confirm: 'Are you sure you want to delete this?'},class: 'btn btn-danger' %>

<br />
<br />

<div class= "board-area">
  <% @board.each_with_index do |row, row_index| %>
    <div class = 'row justify-content-center'>
      <% row.each_with_index do |box, box_index| %>
        <% if (row_index.even? && box_index.odd?) || (row_index.odd? && box_index.even?) %>
          <div class = 'col-1 box box-black'>
            <% if box.is_a?(Piece) %>
              <div class='piece'>
                <div data-item-y_location=<%= box.y_location %>>
                  <div data-item-x_location=<%= box.x_location %>>
                    <%= box.piece_type %>
                    <br/>
                    <%= box.y_location %>
                    <%= box.x_location %>
                    <%# <%= "[#{box.y_location}]" %>
                    <%# <%= "[#{box.x_location}]" %>
                  </div>  
                </div>
              </div>
            <% end %>
          </div>
        <% else %>
          <div class = 'col-1 box'>
            <% if box.is_a?(Piece) %>
              <div class='piece'>
                <div data-item-y_location=<%= box.y_location %>>
                  <div data-item-x_location=<%= box.x_location %>>
                    <%= box.piece_type %>
                    <br/>
                    <%= box.y_location %>
                    <%= box.x_location %>
                    <%# <%= "[#{box.y_location}]" %>
                    <%# <%= "[#{box.x_location}]" %>
                  </div>  
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>

<script>
  $( function() {
    $(".piece").draggable();
    $(".box").droppable({
      drop: function( event, ui ) {
        console.log('piece was dropped');

        if(ui.draggable.context) {
          console.log(ui.draggable.context);
        } else {
          console.log("It's not defined");
        }
      }
    });
  });
</script>
